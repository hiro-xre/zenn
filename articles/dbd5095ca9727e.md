---
title: スタイルガイドを意識して Vue.js を書く
emoji: "⚠️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["vue", "nuxt"]
published: false
---

# はじめに
Vue.js （以降 Vue と記します） を書きはじめて 2 年が経ちました。普段 Vue を書いていてお世話になっているスタイルガイドの中から、実際に直面することが多い項目を紹介します。どなたかの参考になれば幸いです。ご指摘やアドバイスもお待ちしています。

# 対象読者
* 普段 Vue を書いている方
* これから Vue を書こうと思っている方
* Vue のスタイルガイドをはじめて知る方

# 前提
Composition API でのコーディングとします。

# スタイルガイド
https://ja.vuejs.org/style-guide/

公式が提供している Vue の参考書みたいなものです。「こんな感じで書くといいよ」や「これはアンチパターンになるから避けようね」などの具体例が記載されています。基本はこのスタイルガイドに沿ってコーディングしていくのがよいです。


## コンポーネントファイルの命名
実はコンポーネントファイルの命名については、スタイルガイドにいくつか推奨事項があります。
* （必須）実装するコンポーネントの責務を踏まえ、複数単語かつパスカルケースのコンポーネント名となるようにする。
* （推奨）汎用的なベースとなるコンポーネントには特定のプレフィックス（`Base`、`App`、`V` など）ではじめる。
* （推奨）親コンポーネントと密結合になる子コンポーネントは、親コンポーネントの名前をプレフィックスに含める。
* （推奨）複数単語の並び順は責務の主題となる単語からはじめ、説明的な単語を続ける。

基本はこれらを満たす命名となるようにしています。

https://ja.vuejs.org/style-guide/rules-essential.html#use-multi-word-component-names

https://ja.vuejs.org/style-guide/rules-strongly-recommended.html#single-file-component-filename-casing

https://ja.vuejs.org/style-guide/rules-strongly-recommended.html#base-component-names

https://ja.vuejs.org/style-guide/rules-strongly-recommended.html#tightly-coupled-component-names

https://ja.vuejs.org/style-guide/rules-strongly-recommended.html#order-of-words-in-component-names

## コーディングの順序
単一ファイルよりもプロダクト全体で統一されているとよいことですが、コーディングの順序をある程度決めています。スタイルガイドにオプションの順序について記載がありますが、こちらを参考にしています。

* `provide` / `inject` や `store` 情報
* `props` / `emits`
* `state`
* `computed`
* 関数処理（Options API における `methods`オプションに相当する処理）
* `watch`
* ライフサイクルイベント

順序の理由は感覚的なものもありますが、データの流れが追いやすいと考えています。
1. どのようなグローバルな情報が必要で
2. 親からどのようなデータを受け取って
3. このファイルではどのようなデータを管理して
4. どのような参照情報を持って
5. どのような処理があって
6. 処理がどのようなタイミングで行われるか

このようなイメージを持ってコードを書いていますし、コードを読んでいます。
新規実装で Options API を選択することはないですが、Options API は自然とコードが整理されていいですね。

https://ja.vuejs.org/style-guide/rules-recommended.html#component-instance-options-order

## コード間の空白行
これがスタイルガイドに記載されていることが素晴らしいです。視覚的な可読性を上げるためにも、適宜空白行を設けています。
筆者は以下を意識しています。

* `props` ・ `state` ・ `computed` など概念が異なるものには空白行を設ける
* `computed` などのまとまりの中でも、責務が異なるものには空白行を設ける
  * `computed` の参照先となる `state` が異なる場合は空白行を設ける

https://ja.vuejs.org/style-guide/rules-recommended.html#empty-lines-in-component-instance-options

## 単一ファイルコンポーネント内でのコンポーネント名
基本的に `<MyComponent/>` のようにパスカルケースを使用します。それだけです。

https://ja.vuejs.org/style-guide/rules-strongly-recommended.html#component-name-casing-in-templates

## キー付きの v-for を使用する
Linter を使用していれば無意識で対応できますが、`v-for` には必ずキーを付与します。なぜキーが必要なのかスタイルガイドに詳細な理由が記載されていますが、簡潔に述べるとパフォーマンスが安定するからです。

https://ja.vuejs.org/style-guide/rules-essential.html#use-keyed-v-for


